<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div class="container" id="bookmarkApp">
  <h1>Закладки</h1>
  <input type="text" id="bookmarkInput" placeholder="URL">
  <button id="addBookmarkBtn">Додати</button>
  <ul id="bookmarkList"></ul>
</div>

<div class="container" id="formApp">
  <h1>Форма</h1>
  <input type="text" id="username" placeholder="Логін">
  <input type="password" id="password" placeholder="Пароль">
  <button id="saveBtn">Зберегти</button>
</div>


<input type="text" id="search" placeholder="Пошук продуктів...">
<div id="products"></div>

<script>
    const bookmarkInput = document.getElementById("bookmarkInput");
    const addBookmarkBtn = document.getElementById("addBookmarkBtn");
    const bookmarkList = document.getElementById("bookmarkList");

    let bookmarks = JSON.parse(localStorage.getItem("bookmarks")) || [];

    // async рендер
    async function renderBookmarks() {
      try {
        bookmarkList.innerHTML = "";
        bookmarks.forEach((url, index) => {
          const li = document.createElement("li");
          li.innerHTML = `
            <a href="${url}" target="_blank">${url}</a>
            <div>
              <button class="edit">Редагувати</button>
              <button class="delete">Видалити</button>
            </div>
          `;

          li.querySelector(".delete").addEventListener("click", async () => {
            try {
              bookmarks.splice(index, 1);
              localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
              await renderBookmarks();
            } catch (err) {
              console.error("Помилка видалення:", err);
            }
          });

          li.querySelector(".edit").addEventListener("click", async () => {
            try {
              const newUrl = prompt("Введіть новий URL:", url);
              if (newUrl) {
                bookmarks[index] = newUrl;
                localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
                await renderBookmarks();
              }
            } catch (err) {
              console.error("Помилка редагування:", err);
            }
          });

          bookmarkList.appendChild(li);
        });
      } catch (err) {
        console.error("Помилка при відображенні закладок:", err);
      }
    }

    addBookmarkBtn.addEventListener("click", async () => {
      try {
        const url = bookmarkInput.value.trim();
        if (url) {
          bookmarks.push(url);
          localStorage.setItem("bookmarks", JSON.stringify(bookmarks));
          await renderBookmarks();
          bookmarkInput.value = "";
        }
      } catch (err) {
        console.error("Помилка додавання закладки:", err);
      }
    });

    renderBookmarks();

    // ----------------- Форма -----------------
    const usernameInput = document.getElementById("username");
    const passwordInput = document.getElementById("password");
    const saveBtn = document.getElementById("saveBtn");

    window.addEventListener("load", async () => {
      try {
        const savedUser = localStorage.getItem("username");
        const savedPass = localStorage.getItem("password");

        if (savedUser) usernameInput.value = savedUser;
        if (savedPass) passwordInput.value = savedPass;
      } catch (err) {
        console.error("Помилка зчитування даних:", err);
      }
    });

    saveBtn.addEventListener("click", async () => {
      try {
        localStorage.setItem("username", usernameInput.value);
        localStorage.setItem("password", passwordInput.value);
        alert("Дані збережено!");
      } catch (err) {
        console.error("Помилка збереження:", err);
      }
    });

    
</script>
</body>
</html>
